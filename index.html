<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Booking Kampus</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --maroon: #800000;
            --maroon-light: #a52a2a;
            --maroon-dark: #5a0000;
            --white: #ffffff;
            --light-gray: #f5f5f5;
            --gray: #e0e0e0;
            --dark-gray: #333333;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--light-gray);
            color: var(--dark-gray);
            line-height: 1.6;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Login Page */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--maroon) 0%, var(--maroon-dark) 100%);
            padding: 20px;
        }
        
        .login-box {
            background-color: var(--white);
            border-radius: 10px;
            padding: 40px 30px;
            width: 100%;
            max-width: 450px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .login-logo {
            text-align: center;
            margin-bottom: 25px;
            color: var(--maroon);
        }
        
        .login-logo i {
            font-size: 48px;
            margin-bottom: 10px;
        }
        
        .login-logo h1 {
            font-size: 24px;
            font-weight: 600;
        }
        
        .login-box h2 {
            color: var(--maroon);
            text-align: center;
            margin-bottom: 30px;
            font-size: 22px;
        }
        
        .login-info {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 14px;
            border-left: 4px solid var(--maroon);
        }
        
        .login-info p {
            margin-bottom: 8px;
        }
        
        .login-info strong {
            color: var(--maroon);
        }
        
        /* Header */
        header {
            background-color: var(--maroon);
            color: var(--white);
            padding: 18px 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo i {
            font-size: 28px;
        }
        
        .logo h1 {
            font-size: 22px;
            font-weight: 600;
        }
        
        /* Desktop Navigation */
        .desktop-nav {
            display: none;
        }
        
        .desktop-nav ul {
            display: flex;
            list-style: none;
            gap: 25px;
        }
        
        .desktop-nav a {
            color: var(--white);
            text-decoration: none;
            font-weight: 500;
            padding: 8px 15px;
            border-radius: 6px;
            transition: background-color 0.3s;
        }
        
        .desktop-nav a:hover, .desktop-nav a.active {
            background-color: var(--maroon-light);
        }
        
        .user-info {
            display: none;
            align-items: center;
            gap: 15px;
        }
        
        .user-info span {
            font-weight: 500;
        }
        
        .btn-logout {
            background-color: var(--white);
            color: var(--maroon);
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .btn-logout:hover {
            background-color: var(--light-gray);
        }
        
        /* Mobile Menu Button */
        .mobile-menu-btn {
            background: none;
            border: none;
            color: var(--white);
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
        }
        
        /* Mobile Navigation */
        .mobile-nav {
            position: fixed;
            top: 0;
            left: -300px;
            width: 300px;
            height: 100vh;
            background-color: var(--maroon);
            color: var(--white);
            z-index: 1000;
            transition: left 0.3s ease;
            padding: 25px;
            box-shadow: 2px 0 15px rgba(0, 0, 0, 0.2);
            overflow-y: auto;
        }
        
        .mobile-nav.active {
            left: 0;
        }
        
        .mobile-nav-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .mobile-nav-header h2 {
            font-size: 20px;
            font-weight: 600;
        }
        
        .mobile-nav-close {
            background: none;
            border: none;
            color: var(--white);
            font-size: 24px;
            cursor: pointer;
        }
        
        .mobile-nav ul {
            list-style: none;
            margin-bottom: 30px;
        }
        
        .mobile-nav li {
            margin-bottom: 15px;
        }
        
        .mobile-nav a {
            color: var(--white);
            text-decoration: none;
            font-size: 16px;
            padding: 12px 18px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: background-color 0.3s;
        }
        
        .mobile-nav a i {
            width: 24px;
            text-align: center;
        }
        
        .mobile-nav a:hover, .mobile-nav a.active {
            background-color: var(--maroon-light);
        }
        
        .user-info-mobile {
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .user-info-mobile p {
            margin-bottom: 15px;
            font-weight: 500;
            font-size: 16px;
        }
        
        .btn-logout-mobile {
            background-color: var(--white);
            color: var(--maroon);
            border: none;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            width: 100%;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        .btn-logout-mobile:hover {
            background-color: var(--light-gray);
        }
        
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
            display: none;
        }
        
        .overlay.active {
            display: block;
        }
        
        /* Main Content */
        main {
            padding: 30px 0;
            min-height: calc(100vh - 180px);
        }
        
        .page-title {
            color: var(--maroon);
            margin-bottom: 25px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--maroon-light);
            font-size: 24px;
        }
        
        /* Dashboard */
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background-color: var(--white);
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
            border-top: 5px solid var(--maroon);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }
        
        .card h3 {
            color: var(--maroon);
            margin-bottom: 12px;
            font-size: 16px;
        }
        
        .card .number {
            font-size: 32px;
            font-weight: 700;
            color: var(--maroon-dark);
        }
        
        /* Forms */
        .form-container {
            background-color: var(--white);
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--maroon);
        }
        
        .form-control {
            width: 100%;
            padding: 14px;
            border: 1px solid var(--gray);
            border-radius: 8px;
            font-size: 16px;
            transition: border 0.3s;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--maroon);
            box-shadow: 0 0 0 3px rgba(128, 0, 0, 0.1);
        }
        
        textarea.form-control {
            resize: vertical;
            min-height: 120px;
        }
        
        .btn {
            background-color: var(--maroon);
            color: var(--white);
            border: none;
            padding: 14px 28px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: background-color 0.3s, transform 0.2s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn:hover {
            background-color: var(--maroon-light);
            transform: translateY(-2px);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-secondary {
            background-color: var(--gray);
            color: var(--dark-gray);
        }
        
        .btn-secondary:hover {
            background-color: #c0c0c0;
        }
        
        .btn-full {
            width: 100%;
        }
        
        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        /* TABEL BOOTSTRAP STYLING - DIPERBAIKI */
        .table-container {
            background-color: var(--white);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
            overflow: hidden;
        }
        
        /* Custom styling untuk tabel Bootstrap */
        .table {
            margin-bottom: 0;
            border-collapse: separate;
            border-spacing: 0;
            width: 100%;
        }
        
        .table thead th {
            background-color: var(--maroon);
            color: var(--white);
            border: none;
            padding: 16px 12px;
            font-weight: 500;
            font-size: 15px;
            white-space: nowrap;
            position: sticky;
            top: 0;
            z-index: 10;
            vertical-align: middle;
        }
        
        .table tbody td {
            padding: 16px 12px;
            vertical-align: middle;
            border-top: 1px solid var(--gray);
            font-size: 14px;
            word-wrap: break-word;
        }
        
        .table tbody tr:hover {
            background-color: rgba(128, 0, 0, 0.05);
        }
        
        .table tbody tr:last-child td {
            border-bottom: 1px solid var(--gray);
        }
        
        .table-responsive {
            border-radius: 8px;
        }
        
        /* Status badges */
        .status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 500;
            display: inline-block;
            white-space: nowrap;
            text-align: center;
            min-width: 80px;
        }
        
        .status-pending {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        .status-disetujui {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status-ditolak {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        /* Aksi tombol - DIPERBAIKI */
        .action-buttons {
            display: flex;
            gap: 8px;
            flex-wrap: nowrap;
            justify-content: flex-start;
            align-items: center;
            min-height: 40px;
        }
        
        .btn-small {
            padding: 6px 12px;
            font-size: 13px;
            white-space: nowrap;
            height: 32px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            font-weight: 500;
            transition: all 0.2s;
        }
        
        .btn-small:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        /* Khusus untuk tombol aksi di dalam sel */
        .table td .action-buttons {
            min-width: 150px;
        }
        
        /* Untuk status tanpa aksi */
        .no-action {
            min-height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
            font-style: italic;
        }
        
        /* Alert Messages */
        .alert {
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 15px;
            display: flex;
            align-items: center;
            gap: 12px;
            border-left: 5px solid transparent;
        }
        
        .alert-success {
            background-color: #d4edda;
            color: #155724;
            border-left-color: #28a745;
        }
        
        .alert-error {
            background-color: #f8d7da;
            color: #721c24;
            border-left-color: #dc3545;
        }
        
        .alert i {
            font-size: 18px;
        }
        
        /* Quick Actions */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .quick-action-btn {
            background-color: var(--white);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
            border: 2px solid var(--maroon);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 12px;
            text-decoration: none;
            color: var(--dark-gray);
            transition: all 0.3s;
            cursor: pointer;
            text-align: center;
        }
        
        .quick-action-btn:hover {
            background-color: var(--maroon);
            color: var(--white);
            transform: translateY(-5px);
        }
        
        .quick-action-btn i {
            font-size: 32px;
            color: var(--maroon);
        }
        
        .quick-action-btn:hover i {
            color: var(--white);
        }
        
        /* Footer */
        footer {
            background-color: var(--maroon);
            color: var(--white);
            padding: 20px 0;
            text-align: center;
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #666;
        }
        
        .empty-state i {
            font-size: 48px;
            color: var(--gray);
            margin-bottom: 15px;
        }
        
        /* Responsive Design */
        @media (min-width: 768px) {
            .mobile-menu-btn {
                display: none;
            }
            
            .desktop-nav {
                display: block;
            }
            
            .user-info {
                display: flex;
            }
            
            .mobile-nav {
                display: none;
            }
            
            .overlay {
                display: none !important;
            }
            
            /* Lebar kolom aksi yang lebih konsisten */
            .table td:last-child {
                width: 180px;
                min-width: 180px;
            }
        }
        
        @media (max-width: 767px) {
            .dashboard-cards {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
            
            .card {
                padding: 20px;
            }
            
            .card .number {
                font-size: 28px;
            }
            
            .form-container {
                padding: 20px;
            }
            
            .page-title {
                font-size: 20px;
            }
            
            .btn-group {
                flex-direction: column;
            }
            
            .btn-group .btn {
                width: 100%;
            }
            
            .quick-actions {
                grid-template-columns: 1fr;
            }
            
            /* Tabel lebih kompak untuk mobile */
            .table thead th {
                padding: 12px 8px;
                font-size: 14px;
            }
            
            .table tbody td {
                padding: 12px 8px;
                font-size: 13px;
            }
            
            .table-container {
                padding: 15px;
                margin-left: -10px;
                margin-right: -10px;
                border-radius: 0;
                width: calc(100% + 20px);
            }
            
            /* Tombol aksi lebih kompak di mobile */
            .action-buttons {
                flex-wrap: wrap;
                gap: 5px;
            }
            
            .btn-small {
                padding: 4px 8px;
                font-size: 12px;
                height: 28px;
            }
            
            .status {
                padding: 4px 8px;
                font-size: 12px;
                min-width: 70px;
            }
        }
        
        @media (max-width: 480px) {
            .dashboard-cards {
                grid-template-columns: 1fr;
            }
            
            .logo h1 {
                font-size: 18px;
            }
            
            .login-box {
                padding: 30px 20px;
            }
            
            .login-logo h1 {
                font-size: 20px;
            }
            
            /* Tabel lebih kompak untuk mobile kecil */
            .table thead th {
                padding: 10px 6px;
                font-size: 13px;
            }
            
            .table tbody td {
                padding: 10px 6px;
                font-size: 12px;
            }
            
            .btn-small {
                padding: 4px 6px;
                font-size: 11px;
                height: 26px;
            }
            
            .status {
                padding: 3px 6px;
                font-size: 11px;
                min-width: 65px;
            }
        }
        
        .hidden {
            display: none;
        }
        
        /* Garis pemisah yang lebih jelas */
        .table-border {
            border: 1px solid #dee2e6;
        }
        
        /* Untuk sel dengan konten panjang */
        .table td.text-wrap {
            word-wrap: break-word;
            max-width: 250px;
        }
    </style>
</head>
<body>
    <!-- Halaman Login -->
    <div id="loginPage" class="login-container">
        <div class="login-box">
            <div class="login-logo">
                <i class="fas fa-university"></i>
                <h1>Sistem Booking Kampus</h1>
            </div>
            <h2>Silakan Login</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" class="form-control" placeholder="Masukkan email" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" class="form-control" placeholder="Masukkan password" required>
                </div>
                <button type="submit" class="btn btn-full">
                    <i class="fas fa-sign-in-alt"></i> Login
                </button>
            </form>
        </div>
    </div>
    
    <!-- Halaman Utama (setelah login) -->
    <div id="mainPage" class="hidden">
        <!-- Overlay untuk mobile menu -->
        <div class="overlay" id="overlay"></div>
        
        <!-- Mobile Navigation Menu -->
        <div class="mobile-nav" id="mobileNav">
            <div class="mobile-nav-header">
                <h2>Menu Navigasi</h2>
                <button class="mobile-nav-close" id="closeNavBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <ul>
                <li><a href="#" id="mobileNavDashboard" class="active">
                    <i class="fas fa-home"></i> Dashboard
                </a></li>
                <li><a href="#" id="mobileNavBooking">
                    <i class="fas fa-calendar-plus"></i> Booking Ruangan
                </a></li>
                <li><a href="#" id="mobileNavRiwayat">
                    <i class="fas fa-history"></i> Riwayat Booking
                </a></li>
                <li><a href="#" id="mobileNavRuangan" class="admin-only hidden">
                    <i class="fas fa-door-open"></i> Kelola Ruangan
                </a></li>
                <li><a href="#" id="mobileNavKelolaBooking" class="admin-only hidden">
                    <i class="fas fa-tasks"></i> Kelola Booking
                </a></li>
            </ul>
            
            <div class="user-info-mobile">
                <p>Login sebagai: <strong id="mobileUserName"></strong></p>
                <button class="btn-logout-mobile" id="mobileLogoutBtn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>
        
        <!-- Header -->
        <header>
            <div class="container">
                <div class="header-content">
                    <button class="mobile-menu-btn" id="openNavBtn">
                        <i class="fas fa-bars"></i>
                    </button>
                    
                    <div class="logo">
                        <i class="fas fa-university"></i>
                        <h1>Booking Ruangan Kampus</h1>
                    </div>
                    
                    <nav class="desktop-nav">
                        <ul>
                            <li><a href="#" id="navDashboard" class="active">Dashboard</a></li>
                            <li><a href="#" id="navBooking">Booking Ruangan</a></li>
                            <li><a href="#" id="navRiwayat">Riwayat Booking</a></li>
                            <li><a href="#" id="navRuangan" class="admin-only hidden">Kelola Ruangan</a></li>
                            <li><a href="#" id="navKelolaBooking" class="admin-only hidden">Kelola Booking</a></li>
                        </ul>
                    </nav>
                    
                    <div class="user-info">
                        <span id="userName"></span>
                        <button class="btn-logout" id="logoutBtn">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- Main Content -->
        <main>
            <div class="container">
                <!-- Alert Message Area -->
                <div id="alertArea"></div>
                
                <!-- Dashboard -->
                <section id="dashboardSection">
                    <h2 class="page-title">Dashboard</h2>
                    
                    <div class="dashboard-cards">
                        <div class="card">
                            <h3>Total Booking</h3>
                            <div class="number" id="totalBooking">0</div>
                        </div>
                        <div class="card">
                            <h3>Ruangan Tersedia</h3>
                            <div class="number" id="ruanganTersedia">0</div>
                        </div>
                        <div class="card admin-only hidden">
                            <h3>Booking Pending</h3>
                            <div class="number" id="bookingPending">0</div>
                        </div>
                        <div class="card">
                            <h3>Booking Disetujui</h3>
                            <div class="number" id="bookingDisetujui">0</div>
                        </div>
                    </div>
                    
                    <!-- Quick Actions -->
                    <div class="quick-actions">
                        <button class="quick-action-btn" id="quickBookingBtn">
                            <i class="fas fa-calendar-plus"></i>
                            <span>Buat Booking Baru</span>
                        </button>
                        
                        <button class="quick-action-btn" id="quickRiwayatBtn">
                            <i class="fas fa-history"></i>
                            <span>Lihat Riwayat</span>
                        </button>
                        
                        <button class="quick-action-btn admin-only hidden" id="quickKelolaBtn">
                            <i class="fas fa-tasks"></i>
                            <span>Kelola Booking</span>
                        </button>
                        
                        <button class="quick-action-btn admin-only hidden" id="quickRuanganBtn">
                            <i class="fas fa-door-open"></i>
                            <span>Kelola Ruangan</span>
                        </button>
                    </div>
                    
                    <!-- Untuk Admin -->
                    <div class="admin-only hidden">
                        <h3 class="page-title">Booking Terbaru</h3>
                        <div class="table-container">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead class="thead-dark">
                                        <tr>
                                            <th>Nama</th>
                                            <th>Ruangan</th>
                                            <th>Tanggal</th>
                                            <th>Status</th>
                                            <th class="text-center">Aksi</th>
                                        </tr>
                                    </thead>
                                    <tbody id="recentBookingsTableBody">
                                        <!-- Data akan diisi oleh JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Untuk Pengguna -->
                    <div class="user-only hidden">
                        <h3 class="page-title">Booking Terbaru Saya</h3>
                        <div class="table-container">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead class="thead-dark">
                                        <tr>
                                            <th>Ruangan</th>
                                            <th>Tanggal</th>
                                            <th>Jam</th>
                                            <th class="text-center">Status</th>
                                        </tr>
                                    </thead>
                                    <tbody id="myBookingsTableBody">
                                        <!-- Data akan diisi oleh JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Form Booking -->
                <section id="bookingSection" class="hidden">
                    <h2 class="page-title">Form Booking Ruangan</h2>
                    <div class="form-container">
                        <form id="bookingForm">
                            <div class="form-group">
                                <label for="ruanganBooking">
                                    <i class="fas fa-door-open"></i> Pilih Ruangan
                                </label>
                                <select id="ruanganBooking" class="form-control" required>
                                    <option value="">Pilih Ruangan</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="tanggalBooking">
                                    <i class="fas fa-calendar-alt"></i> Tanggal Booking
                                </label>
                                <input type="date" id="tanggalBooking" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="jamMulai">
                                    <i class="fas fa-clock"></i> Jam Mulai
                                </label>
                                <input type="time" id="jamMulai" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="jamSelesai">
                                    <i class="fas fa-clock"></i> Jam Selesai
                                </label>
                                <input type="time" id="jamSelesai" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="keperluan">
                                    <i class="fas fa-file-alt"></i> Keperluan
                                </label>
                                <textarea id="keperluan" class="form-control" rows="4" placeholder="Jelaskan keperluan booking ruangan" required></textarea>
                            </div>
                            <div class="btn-group">
                                <button type="submit" class="btn">
                                    <i class="fas fa-paper-plane"></i> Ajukan Booking
                                </button>
                                <button type="button" id="cancelBooking" class="btn btn-secondary">
                                    <i class="fas fa-times"></i> Batal
                                </button>
                            </div>
                        </form>
                    </div>
                </section>
                
                <!-- Riwayat Booking -->
                <section id="riwayatSection" class="hidden">
                    <h2 class="page-title">Riwayat Booking Saya</h2>
                    <div class="table-container">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead class="thead-dark">
                                    <tr>
                                        <th>Ruangan</th>
                                        <th>Tanggal</th>
                                        <th>Jam</th>
                                        <th>Keperluan</th>
                                        <th class="text-center">Status</th>
                                    </tr>
                                </thead>
                                <tbody id="riwayatTableBody">
                                    <!-- Data akan diisi oleh JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>
                
                <!-- Kelola Ruangan (Admin) -->
                <section id="ruanganSection" class="hidden">
                    <h2 class="page-title">Kelola Ruangan</h2>
                    
                    <div class="form-container">
                        <h3 style="color: var(--maroon); margin-bottom: 20px;">
                            <i class="fas fa-plus-circle"></i> Tambah Ruangan Baru
                        </h3>
                        <form id="tambahRuanganForm">
                            <div class="form-group">
                                <label for="namaRuangan">Nama Ruangan</label>
                                <input type="text" id="namaRuangan" class="form-control" placeholder="Contoh: Ruang Seminar A" required>
                            </div>
                            <div class="form-group">
                                <label for="gedungRuangan">Gedung</label>
                                <input type="text" id="gedungRuangan" class="form-control" placeholder="Contoh: Gedung Utama" required>
                            </div>
                            <div class="form-group">
                                <label for="kapasitasRuangan">Kapasitas</label>
                                <input type="number" id="kapasitasRuangan" class="form-control" placeholder="Contoh: 50" required min="1">
                            </div>
                            <div class="form-group">
                                <label for="fasilitasRuangan">Fasilitas</label>
                                <textarea id="fasilitasRuangan" class="form-control" rows="3" placeholder="Contoh: Proyektor, AC, Podium"></textarea>
                            </div>
                            <button type="submit" class="btn">
                                <i class="fas fa-save"></i> Simpan Ruangan
                            </button>
                        </form>
                    </div>
                    
                    <h3 class="page-title" style="margin-top: 30px;">Daftar Ruangan</h3>
                    <div class="table-container">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead class="thead-dark">
                                    <tr>
                                        <th>Nama Ruangan</th>
                                        <th>Gedung</th>
                                        <th>Kapasitas</th>
                                        <th class="text-center">Status</th>
                                        <th class="text-center">Aksi</th>
                                    </tr>
                                </thead>
                                <tbody id="ruanganTableBody">
                                    <!-- Data akan diisi oleh JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>
                
                <!-- Kelola Booking (Admin) -->
                <section id="kelolaBookingSection" class="hidden">
                    <h2 class="page-title">Kelola Booking Pengguna</h2>
                    <div class="table-container">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead class="thead-dark">
                                    <tr>
                                        <th>Nama Pemesan</th>
                                        <th>Ruangan</th>
                                        <th>Tanggal</th>
                                        <th>Jam</th>
                                        <th>Keperluan</th>
                                        <th class="text-center">Status</th>
                                        <th class="text-center">Aksi</th>
                                    </tr>
                                </thead>
                                <tbody id="kelolaBookingTableBody">
                                    <!-- Data akan diisi oleh JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>
            </div>
        </main>
        
        <footer>
            <div class="container">
                <p>&copy; 2023 Sistem Booking Ruangan Kampus. Tema: Maroon & White</p>
                <p>Dibuat untuk memudahkan proses booking ruangan di kampus</p>
            </div>
        </footer>
    </div>

    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Data simulasi (sebagai pengganti database)
        let currentUser = null;
        let isAdmin = false;
        
        // Data pengguna
        const users = [
            { id: 1, nama: "Admin Kampus", email: "admin@kampus.ac.id", password: "admin123", role: "admin" },
            { id: 2, nama: "Mahasiswa Contoh", email: "user@kampus.ac.id", password: "user123", role: "user" }
        ];
        
        // Data ruangan
        let ruangan = [
            { id: 1, nama_ruangan: "Ruang Seminar A", gedung: "Gedung Utama", kapasitas: 50, fasilitas: "Proyektor, Podium, AC", status: "tersedia" },
            { id: 2, nama_ruangan: "Lab Komputer 1", gedung: "Gedung Teknik", kapasitas: 30, fasilitas: "Komputer, Proyektor", status: "tersedia" },
            { id: 3, nama_ruangan: "Ruang Kelas 101", gedung: "Gedung A", kapasitas: 40, fasilitas: "Proyektor, Whiteboard", status: "tersedia" },
            { id: 4, nama_ruangan: "Auditorium", gedung: "Gedung Serba Guna", kapasitas: 200, fasilitas: "Panggung, Sound System, AC", status: "tersedia" }
        ];
        
        // Data booking
        let bookings = [
            { id: 1, user_id: 2, ruangan_id: 1, tanggal_booking: getTodayDate(), jam_mulai: "08:00", jam_selesai: "10:00", keperluan: "Seminar Mahasiswa", status: "disetujui" },
            { id: 2, user_id: 2, ruangan_id: 2, tanggal_booking: getTomorrowDate(), jam_mulai: "13:00", jam_selesai: "15:00", keperluan: "Praktikum Pemrograman", status: "pending" },
            { id: 3, user_id: 2, ruangan_id: 3, tanggal_booking: getDateAfterTomorrow(), jam_mulai: "10:00", jam_selesai: "12:00", keperluan: "Diskusi Kelompok", status: "disetujui" }
        ];
        
        // Fungsi helper untuk tanggal
        function getTodayDate() {
            const today = new Date();
            return today.toISOString().split('T')[0];
        }
        
        function getTomorrowDate() {
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            return tomorrow.toISOString().split('T')[0];
        }
        
        function getDateAfterTomorrow() {
            const dayAfterTomorrow = new Date();
            dayAfterTomorrow.setDate(dayAfterTomorrow.getDate() + 2);
            return dayAfterTomorrow.toISOString().split('T')[0];
        }
        
        // Fungsi untuk inisialisasi aplikasi
        function initApp() {
            // Cek apakah user sudah login
            const loggedInUser = localStorage.getItem('bookingUser');
            if (loggedInUser) {
                currentUser = JSON.parse(loggedInUser);
                isAdmin = currentUser.role === 'admin';
                showMainPage();
                updateUI();
                loadDashboard();
            }
            
            // Setup event listeners
            setupEventListeners();
        }
        
        // Setup event listeners
        function setupEventListeners() {
            // Login form
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
            
            // Mobile menu
            document.getElementById('openNavBtn').addEventListener('click', openMobileNav);
            document.getElementById('closeNavBtn').addEventListener('click', closeMobileNav);
            document.getElementById('overlay').addEventListener('click', closeMobileNav);
            
            // Logout buttons
            document.getElementById('logoutBtn').addEventListener('click', handleLogout);
            document.getElementById('mobileLogoutBtn').addEventListener('click', handleLogout);
            
            // Desktop Navigation
            document.getElementById('navDashboard').addEventListener('click', (e) => {
                e.preventDefault();
                showSection('dashboardSection');
                updateDesktopNavigation('navDashboard');
            });
            
            document.getElementById('navBooking').addEventListener('click', (e) => {
                e.preventDefault();
                showSection('bookingSection');
                updateDesktopNavigation('navBooking');
                loadRuanganOptions();
            });
            
            document.getElementById('navRiwayat').addEventListener('click', (e) => {
                e.preventDefault();
                showSection('riwayatSection');
                updateDesktopNavigation('navRiwayat');
                loadRiwayatBooking();
            });
            
            document.getElementById('navRuangan').addEventListener('click', (e) => {
                e.preventDefault();
                showSection('ruanganSection');
                updateDesktopNavigation('navRuangan');
                loadRuanganTable();
            });
            
            document.getElementById('navKelolaBooking').addEventListener('click', (e) => {
                e.preventDefault();
                showSection('kelolaBookingSection');
                updateDesktopNavigation('navKelolaBooking');
                loadKelolaBooking();
            });
            
            // Mobile Navigation
            document.getElementById('mobileNavDashboard').addEventListener('click', (e) => {
                e.preventDefault();
                showSection('dashboardSection');
                updateMobileNavigation('mobileNavDashboard');
                closeMobileNav();
            });
            
            document.getElementById('mobileNavBooking').addEventListener('click', (e) => {
                e.preventDefault();
                showSection('bookingSection');
                updateMobileNavigation('mobileNavBooking');
                closeMobileNav();
                loadRuanganOptions();
            });
            
            document.getElementById('mobileNavRiwayat').addEventListener('click', (e) => {
                e.preventDefault();
                showSection('riwayatSection');
                updateMobileNavigation('mobileNavRiwayat');
                closeMobileNav();
                loadRiwayatBooking();
            });
            
            document.getElementById('mobileNavRuangan').addEventListener('click', (e) => {
                e.preventDefault();
                showSection('ruanganSection');
                updateMobileNavigation('mobileNavRuangan');
                closeMobileNav();
                loadRuanganTable();
            });
            
            document.getElementById('mobileNavKelolaBooking').addEventListener('click', (e) => {
                e.preventDefault();
                showSection('kelolaBookingSection');
                updateMobileNavigation('mobileNavKelolaBooking');
                closeMobileNav();
                loadKelolaBooking();
            });
            
            // Quick action buttons
            document.getElementById('quickBookingBtn').addEventListener('click', () => {
                showSection('bookingSection');
                updateDesktopNavigation('navBooking');
                updateMobileNavigation('mobileNavBooking');
                loadRuanganOptions();
            });
            
            document.getElementById('quickRiwayatBtn').addEventListener('click', () => {
                showSection('riwayatSection');
                updateDesktopNavigation('navRiwayat');
                updateMobileNavigation('mobileNavRiwayat');
                loadRiwayatBooking();
            });
            
            document.getElementById('quickKelolaBtn').addEventListener('click', () => {
                showSection('kelolaBookingSection');
                updateDesktopNavigation('navKelolaBooking');
                updateMobileNavigation('mobileNavKelolaBooking');
                loadKelolaBooking();
            });
            
            document.getElementById('quickRuanganBtn').addEventListener('click', () => {
                showSection('ruanganSection');
                updateDesktopNavigation('navRuangan');
                updateMobileNavigation('mobileNavRuangan');
                loadRuanganTable();
            });
            
            // Booking form
            document.getElementById('bookingForm').addEventListener('submit', handleBooking);
            document.getElementById('cancelBooking').addEventListener('click', () => {
                showSection('dashboardSection');
                updateDesktopNavigation('navDashboard');
                updateMobileNavigation('mobileNavDashboard');
            });
            
            // Tambah ruangan form
            document.getElementById('tambahRuanganForm').addEventListener('submit', handleTambahRuangan);
        }
        
        // Handle login
        function handleLogin(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;
            
            // Cari user berdasarkan email dan password
            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                currentUser = user;
                isAdmin = user.role === 'admin';
                
                // Simpan di localStorage
                localStorage.setItem('bookingUser', JSON.stringify(user));
                
                // Tampilkan halaman utama
                showMainPage();
                updateUI();
                loadDashboard();
                
                // Reset form
                document.getElementById('loginForm').reset();
                
                // Tampilkan alert sukses
                showAlert(`Login berhasil! Selamat datang ${user.nama}`, 'success');
            } else {
                showAlert('Email atau password tidak valid!', 'error');
            }
        }
        
        // Handle logout
        function handleLogout() {
            currentUser = null;
            isAdmin = false;
            localStorage.removeItem('bookingUser');
            showLoginPage();
        }
        
        // Handle booking
        function handleBooking(e) {
            e.preventDefault();
            
            const ruanganId = parseInt(document.getElementById('ruanganBooking').value);
            const tanggal = document.getElementById('tanggalBooking').value;
            const jamMulai = document.getElementById('jamMulai').value;
            const jamSelesai = document.getElementById('jamSelesai').value;
            const keperluan = document.getElementById('keperluan').value.trim();
            
            // Validasi
            if (!ruanganId) {
                showAlert('Pilih ruangan terlebih dahulu!', 'error');
                return;
            }
            
            if (!tanggal) {
                showAlert('Pilih tanggal booking!', 'error');
                return;
            }
            
            if (!jamMulai || !jamSelesai) {
                showAlert('Pilih jam mulai dan jam selesai!', 'error');
                return;
            }
            
            if (jamSelesai <= jamMulai) {
                showAlert('Jam selesai harus setelah jam mulai!', 'error');
                return;
            }
            
            // Validasi tanggal tidak boleh hari kemarin
            const today = new Date().toISOString().split('T')[0];
            if (tanggal < today) {
                showAlert('Tanggal booking tidak boleh hari kemarin!', 'error');
                return;
            }
            
            if (!keperluan) {
                showAlert('Isi keperluan booking!', 'error');
                return;
            }
            
            // Cek ketersediaan ruangan
            const ruanganTerpilih = ruangan.find(r => r.id === ruanganId);
            if (!ruanganTerpilih || ruanganTerpilih.status !== 'tersedia') {
                showAlert('Ruangan tidak tersedia!', 'error');
                return;
            }
            
            // Buat booking baru
            const newBooking = {
                id: bookings.length + 1,
                user_id: currentUser.id,
                ruangan_id: ruanganId,
                tanggal_booking: tanggal,
                jam_mulai: jamMulai,
                jam_selesai: jamSelesai,
                keperluan: keperluan,
                status: 'pending'
            };
            
            bookings.push(newBooking);
            
            showAlert('Booking berhasil diajukan! Menunggu persetujuan admin.', 'success');
            
            // Reset form
            document.getElementById('bookingForm').reset();
            
            // Kembali ke dashboard
            showSection('dashboardSection');
            updateDesktopNavigation('navDashboard');
            updateMobileNavigation('mobileNavDashboard');
            loadDashboard();
        }
        
        // Handle tambah ruangan
        function handleTambahRuangan(e) {
            e.preventDefault();
            
            const nama = document.getElementById('namaRuangan').value.trim();
            const gedung = document.getElementById('gedungRuangan').value.trim();
            const kapasitas = parseInt(document.getElementById('kapasitasRuangan').value);
            const fasilitas = document.getElementById('fasilitasRuangan').value.trim();
            
            // Validasi
            if (!nama) {
                showAlert('Nama ruangan harus diisi!', 'error');
                return;
            }
            
            if (!gedung) {
                showAlert('Nama gedung harus diisi!', 'error');
                return;
            }
            
            if (!kapasitas || isNaN(kapasitas) || kapasitas < 1) {
                showAlert('Kapasitas harus berupa angka minimal 1!', 'error');
                return;
            }
            
            const newRuangan = {
                id: ruangan.length + 1,
                nama_ruangan: nama,
                gedung: gedung,
                kapasitas: kapasitas,
                fasilitas: fasilitas || "-",
                status: "tersedia"
            };
            
            ruangan.push(newRuangan);
            
            // Reset form
            document.getElementById('tambahRuanganForm').reset();
            
            loadRuanganTable();
            loadDashboard();
            showAlert('Ruangan berhasil ditambahkan!', 'success');
        }
        
        // Update status booking (admin)
        function updateBookingStatus(bookingId, status) {
            const booking = bookings.find(b => b.id === bookingId);
            if (booking) {
                booking.status = status;
                loadKelolaBooking();
                loadDashboard();
                
                if (status === 'disetujui') {
                    showAlert('Booking telah disetujui!', 'success');
                } else {
                    showAlert('Booking telah ditolak!', 'success');
                }
            }
        }
        
        // Update status ruangan (admin)
        function updateRuanganStatus(ruanganId, status) {
            const ruanganItem = ruangan.find(r => r.id === ruanganId);
            if (ruanganItem) {
                ruanganItem.status = status;
                loadRuanganTable();
                loadDashboard();
                showAlert(`Status ruangan berhasil diubah menjadi ${status === 'tersedia' ? 'tersedia' : 'tidak tersedia'}!`, 'success');
            }
        }
        
        // Hapus ruangan (admin)
        function deleteRuangan(ruanganId) {
            if (confirm('Apakah Anda yakin ingin menghapus ruangan ini?')) {
                // Hanya hapus jika tidak ada booking aktif
                const bookingAktif = bookings.find(b => b.ruangan_id === ruanganId && b.status !== 'ditolak');
                if (bookingAktif) {
                    showAlert('Ruangan tidak dapat dihapus karena masih ada booking aktif!', 'error');
                    return;
                }
                
                ruangan = ruangan.filter(r => r.id !== ruanganId);
                loadRuanganTable();
                loadDashboard();
                showAlert('Ruangan berhasil dihapus!', 'success');
            }
        }
        
        // Tampilkan alert
        function showAlert(message, type) {
            const alertArea = document.getElementById('alertArea');
            const alertClass = type === 'success' ? 'alert-success' : 'alert-error';
            const icon = type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle';
            
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert ${alertClass}`;
            alertDiv.innerHTML = `
                <i class="fas ${icon}"></i>
                <span>${message}</span>
            `;
            
            alertArea.innerHTML = '';
            alertArea.appendChild(alertDiv);
            
            // Hapus alert setelah 5 detik
            setTimeout(() => {
                alertDiv.remove();
            }, 5000);
        }
        
        // Mobile menu functions
        function openMobileNav() {
            document.getElementById('mobileNav').classList.add('active');
            document.getElementById('overlay').classList.add('active');
        }
        
        function closeMobileNav() {
            document.getElementById('mobileNav').classList.remove('active');
            document.getElementById('overlay').classList.remove('active');
        }
        
        // Tampilkan halaman login
        function showLoginPage() {
            document.getElementById('loginPage').classList.remove('hidden');
            document.getElementById('mainPage').classList.add('hidden');
        }
        
        // Tampilkan halaman utama
        function showMainPage() {
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('mainPage').classList.remove('hidden');
        }
        
        // Tampilkan section tertentu
        function showSection(sectionId) {
            // Sembunyikan semua section
            const sections = ['dashboardSection', 'bookingSection', 'riwayatSection', 'ruanganSection', 'kelolaBookingSection'];
            sections.forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });
            
            // Tampilkan section yang dipilih
            document.getElementById(sectionId).classList.remove('hidden');
            
            // Scroll ke atas
            window.scrollTo(0, 0);
        }
        
        // Update desktop navigasi aktif
        function updateDesktopNavigation(activeNavId) {
            const navItems = ['navDashboard', 'navBooking', 'navRiwayat', 'navRuangan', 'navKelolaBooking'];
            navItems.forEach(id => {
                document.getElementById(id).classList.remove('active');
            });
            
            document.getElementById(activeNavId).classList.add('active');
        }
        
        // Update mobile navigasi aktif
        function updateMobileNavigation(activeNavId) {
            const navItems = ['mobileNavDashboard', 'mobileNavBooking', 'mobileNavRiwayat', 'mobileNavRuangan', 'mobileNavKelolaBooking'];
            navItems.forEach(id => {
                document.getElementById(id).classList.remove('active');
            });
            
            document.getElementById(activeNavId).classList.add('active');
        }
        
        // Update UI berdasarkan peran user
        function updateUI() {
            const userName = document.getElementById('userName');
            const mobileUserName = document.getElementById('mobileUserName');
            
            userName.textContent = currentUser.nama;
            mobileUserName.textContent = currentUser.nama;
            
            // Tampilkan/ sembunyikan menu admin
            const adminElements = document.querySelectorAll('.admin-only');
            adminElements.forEach(el => {
                if (isAdmin) {
                    el.classList.remove('hidden');
                } else {
                    el.classList.add('hidden');
                }
            });
            
            // Tampilkan/ sembunyikan menu user
            const userElements = document.querySelectorAll('.user-only');
            userElements.forEach(el => {
                if (!isAdmin) {
                    el.classList.remove('hidden');
                } else {
                    el.classList.add('hidden');
                }
            });
        }
        
        // Load dashboard data
        function loadDashboard() {
            // Hitung statistik
            const totalBooking = bookings.filter(b => b.user_id === currentUser.id || isAdmin).length;
            const ruanganTersedia = ruangan.filter(r => r.status === 'tersedia').length;
            const bookingPending = bookings.filter(b => b.status === 'pending').length;
            const bookingDisetujui = bookings.filter(b => b.status === 'disetujui' && (b.user_id === currentUser.id || isAdmin)).length;
            
            // Update statistik
            document.getElementById('totalBooking').textContent = totalBooking;
            document.getElementById('ruanganTersedia').textContent = ruanganTersedia;
            document.getElementById('bookingPending').textContent = bookingPending;
            document.getElementById('bookingDisetujui').textContent = bookingDisetujui;
            
            // Untuk admin: tampilkan booking terbaru
            if (isAdmin) {
                const recentBookingsTableBody = document.getElementById('recentBookingsTableBody');
                recentBookingsTableBody.innerHTML = '';
                
                // Ambil 5 booking terbaru
                const recentBookings = bookings.slice(-5).reverse();
                
                if (recentBookings.length === 0) {
                    recentBookingsTableBody.innerHTML = `<tr><td colspan="5" class="text-center py-4">Belum ada data booking</td></tr>`;
                } else {
                    recentBookings.forEach(booking => {
                        const user = users.find(u => u.id === booking.user_id);
                        const ruanganItem = ruangan.find(r => r.id === booking.ruangan_id);
                        
                        if (user && ruanganItem) {
                            let statusClass = 'status-pending';
                            if (booking.status === 'disetujui') statusClass = 'status-disetujui';
                            if (booking.status === 'ditolak') statusClass = 'status-ditolak';
                            
                            const row = document.createElement('tr');
                            row.innerHTML = `
                                <td class="align-middle">${user.nama}</td>
                                <td class="align-middle">${ruanganItem.nama_ruangan}</td>
                                <td class="align-middle">${booking.tanggal_booking}</td>
                                <td class="align-middle text-center">
                                    <span class="status ${statusClass}">${booking.status}</span>
                                </td>
                                <td class="align-middle">
                                    <div class="action-buttons">
                                        ${booking.status === 'pending' ? `
                                            <button class="btn btn-small" onclick="updateBookingStatus(${booking.id}, 'disetujui')">Setujui</button>
                                            <button class="btn btn-small btn-secondary" onclick="updateBookingStatus(${booking.id}, 'ditolak')">Tolak</button>
                                        ` : '<div class="no-action">-</div>'}
                                    </div>
                                </td>
                            `;
                            recentBookingsTableBody.appendChild(row);
                        }
                    });
                }
            } else {
                // Untuk user: tampilkan booking saya
                const myBookingsTableBody = document.getElementById('myBookingsTableBody');
                myBookingsTableBody.innerHTML = '';
                
                const userBookings = bookings.filter(b => b.user_id === currentUser.id).slice(-5).reverse();
                
                if (userBookings.length === 0) {
                    myBookingsTableBody.innerHTML = `<tr><td colspan="4" class="text-center py-4">Belum ada data booking</td></tr>`;
                } else {
                    userBookings.forEach(booking => {
                        const ruanganItem = ruangan.find(r => r.id === booking.ruangan_id);
                        
                        if (ruanganItem) {
                            let statusClass = 'status-pending';
                            if (booking.status === 'disetujui') statusClass = 'status-disetujui';
                            if (booking.status === 'ditolak') statusClass = 'status-ditolak';
                            
                            const row = document.createElement('tr');
                            row.innerHTML = `
                                <td class="align-middle">${ruanganItem.nama_ruangan}</td>
                                <td class="align-middle">${booking.tanggal_booking}</td>
                                <td class="align-middle">${booking.jam_mulai} - ${booking.jam_selesai}</td>
                                <td class="align-middle text-center">
                                    <span class="status ${statusClass}">${booking.status}</span>
                                </td>
                            `;
                            myBookingsTableBody.appendChild(row);
                        }
                    });
                }
            }
        }
        
        // Load opsi ruangan untuk dropdown
        function loadRuanganOptions() {
            const select = document.getElementById('ruanganBooking');
            select.innerHTML = '<option value="">Pilih Ruangan</option>';
            
            const ruanganTersediaList = ruangan.filter(r => r.status === 'tersedia');
            
            ruanganTersediaList.forEach(r => {
                const option = document.createElement('option');
                option.value = r.id;
                option.textContent = `${r.nama_ruangan} (${r.gedung}) - Kapasitas: ${r.kapasitas}`;
                select.appendChild(option);
            });
            
            // Set tanggal minimum (hari ini)
            const today = new Date().toISOString().split('T')[0];
            const tanggalInput = document.getElementById('tanggalBooking');
            tanggalInput.min = today;
            
            // Set default value untuk hari ini
            if (!tanggalInput.value) {
                tanggalInput.value = today;
            }
        }
        
        // Load riwayat booking user
        function loadRiwayatBooking() {
            const riwayatTableBody = document.getElementById('riwayatTableBody');
            riwayatTableBody.innerHTML = '';
            
            const userBookings = bookings.filter(b => b.user_id === currentUser.id);
            
            if (userBookings.length === 0) {
                riwayatTableBody.innerHTML = `<tr><td colspan="5" class="text-center py-4">Belum ada riwayat booking</td></tr>`;
                return;
            }
            
            userBookings.forEach(booking => {
                const ruanganItem = ruangan.find(r => r.id === booking.ruangan_id);
                
                if (ruanganItem) {
                    let statusClass = 'status-pending';
                    if (booking.status === 'disetujui') statusClass = 'status-disetujui';
                    if (booking.status === 'ditolak') statusClass = 'status-ditolak';
                    
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td class="align-middle">${ruanganItem.nama_ruangan}</td>
                        <td class="align-middle">${booking.tanggal_booking}</td>
                        <td class="align-middle">${booking.jam_mulai} - ${booking.jam_selesai}</td>
                        <td class="align-middle text-wrap">${booking.keperluan}</td>
                        <td class="align-middle text-center">
                            <span class="status ${statusClass}">${booking.status}</span>
                        </td>
                    `;
                    riwayatTableBody.appendChild(row);
                }
            });
        }
        
        // Load tabel ruangan (admin)
        function loadRuanganTable() {
            const ruanganTableBody = document.getElementById('ruanganTableBody');
            ruanganTableBody.innerHTML = '';
            
            if (ruangan.length === 0) {
                ruanganTableBody.innerHTML = `<tr><td colspan="5" class="text-center py-4">Belum ada data ruangan</td></tr>`;
                return;
            }
            
            ruangan.forEach(r => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="align-middle">${r.nama_ruangan}</td>
                    <td class="align-middle">${r.gedung}</td>
                    <td class="align-middle">${r.kapasitas}</td>
                    <td class="align-middle text-center">
                        <span class="status ${r.status === 'tersedia' ? 'status-disetujui' : 'status-ditolak'}">${r.status}</span>
                    </td>
                    <td class="align-middle">
                        <div class="action-buttons">
                            <button class="btn btn-small" onclick="updateRuanganStatus(${r.id}, '${r.status === 'tersedia' ? 'tidak tersedia' : 'tersedia'}')">
                                ${r.status === 'tersedia' ? 'Nonaktifkan' : 'Aktifkan'}
                            </button>
                            <button class="btn btn-small btn-secondary" onclick="deleteRuangan(${r.id})">Hapus</button>
                        </div>
                    </td>
                `;
                ruanganTableBody.appendChild(row);
            });
        }
        
        // Load kelola booking (admin)
        function loadKelolaBooking() {
            const kelolaBookingTableBody = document.getElementById('kelolaBookingTableBody');
            kelolaBookingTableBody.innerHTML = '';
            
            if (bookings.length === 0) {
                kelolaBookingTableBody.innerHTML = `<tr><td colspan="7" class="text-center py-4">Belum ada data booking</td></tr>`;
                return;
            }
            
            bookings.forEach(booking => {
                const user = users.find(u => u.id === booking.user_id);
                const ruanganItem = ruangan.find(r => r.id === booking.ruangan_id);
                
                if (user && ruanganItem) {
                    let statusClass = 'status-pending';
                    if (booking.status === 'disetujui') statusClass = 'status-disetujui';
                    if (booking.status === 'ditolak') statusClass = 'status-ditolak';
                    
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td class="align-middle">${user.nama}</td>
                        <td class="align-middle">${ruanganItem.nama_ruangan}</td>
                        <td class="align-middle">${booking.tanggal_booking}</td>
                        <td class="align-middle">${booking.jam_mulai} - ${booking.jam_selesai}</td>
                        <td class="align-middle text-wrap">${booking.keperluan}</td>
                        <td class="align-middle text-center">
                            <span class="status ${statusClass}">${booking.status}</span>
                        </td>
                        <td class="align-middle">
                            <div class="action-buttons">
                                ${booking.status === 'pending' ? `
                                    <button class="btn btn-small" onclick="updateBookingStatus(${booking.id}, 'disetujui')">Setujui</button>
                                    <button class="btn btn-small btn-secondary" onclick="updateBookingStatus(${booking.id}, 'ditolak')">Tolak</button>
                                ` : '<div class="no-action">-</div>'}
                            </div>
                        </td>
                    `;
                    kelolaBookingTableBody.appendChild(row);
                }
            });
        }
        
        // Inisialisasi aplikasi saat halaman dimuat
        window.addEventListener('DOMContentLoaded', () => {
            initApp();
        });
    </script>
</body>
</html>